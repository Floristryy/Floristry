<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Цветочный магазин "Флора"</title>
    <style>
        :root {
            --primary-color: #e91e63;
            --secondary-color: #4CAF50;
            --dark-color: #333;
            --light-color: #f9f9f9;
            --shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }

        body {
            line-height: 1.6;
            color: #333;
            background-color: var(--light-color);
        }

        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Шапка */
        header {
            background-color: #fff;
            box-shadow: var(--shadow);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            transition: all 0.3s;
        }

        header .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary-color);
        }

        nav ul {
            display: flex;
            list-style: none;
        }

        nav ul li {
            margin-left: 20px;
        }

        nav ul li a {
            text-decoration: none;
            color: var(--dark-color);
            transition: color 0.3s;
        }

        nav ul li a:hover {
            color: var(--primary-color);
        }

        #admin-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        #admin-btn:hover {
            background-color: #c2185b;
        }

        /* Герой секция */
        .hero {
            background-size: cover;
            background-position: center;
            height: 70vh;
            display: flex;
            align-items: center;
            color: white;
            text-align: center;
            margin-top: 60px;
            position: relative;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
        }

        .hero .container {
            position: relative;
            z-index: 1;
        }

        .hero h1 {
            font-size: 3rem;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .hero p {
            font-size: 1.2rem;
            margin-bottom: 30px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        .btn {
            display: inline-block;
            background-color: var(--primary-color);
            color: white;
            padding: 12px 30px;
            text-decoration: none;
            border-radius: 4px;
            transition: background-color 0.3s;
        }

        .btn:hover {
            background-color: #c2185b;
        }

        /* Секция товаров */
        .products {
            padding: 80px 0;
        }

        .products h2 {
            text-align: center;
            margin-bottom: 40px;
            font-size: 2.5rem;
            color: var(--dark-color);
        }

        /* Вкладки категорий */
        .category-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 40px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .category-tab {
            padding: 10px 20px;
            background-color: white;
            border: 2px solid var(--primary-color);
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            color: var(--primary-color);
        }

        .category-tab:hover {
            background-color: #fce4ec;
        }

        .category-tab.active {
            background-color: var(--primary-color);
            color: white;
        }

        .category-content {
            display: none;
        }

        .category-content.active {
            display: block;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 30px;
        }

        .product-card {
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: transform 0.3s;
            cursor: pointer;
        }

        .product-card:hover {
            transform: translateY(-5px);
        }

        .product-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .product-info {
            padding: 15px;
        }

        .product-name {
            font-size: 1.2rem;
            margin-bottom: 10px;
        }

        .product-price {
            font-weight: bold;
            color: var(--primary-color);
            font-size: 1.1rem;
        }

        .product-description {
            color: #666;
            margin-top: 10px;
            font-size: 0.9rem;
        }

        .order-btn {
            display: block;
            width: 100%;
            background-color: var(--secondary-color);
            color: white;
            border: none;
            padding: 10px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 15px;
            transition: background-color 0.3s;
        }

        .order-btn:hover {
            background-color: #45a049;
        }

        /* О нас */
        .about {
            padding: 80px 0;
            background-color: white;
        }

        .about h2 {
            text-align: center;
            margin-bottom: 40px;
            font-size: 2.5rem;
            color: var(--dark-color);
        }

        .about-content {
            display: flex;
            align-items: center;
            gap: 40px;
        }

        .about-text {
            flex: 1;
        }

        .about-image {
            flex: 1;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        .about-image img {
            width: 100%;
            height: auto;
            display: block;
        }

        /* Подвал */
        footer {
            background-color: var(--dark-color);
            color: white;
            padding: 40px 0;
        }

        .footer-content {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
        }

        .footer-section {
            flex: 1;
            min-width: 250px;
            margin-bottom: 20px;
        }

        .footer-section h3 {
            margin-bottom: 15px;
            font-size: 1.2rem;
            color: var(--primary-color);
        }

        .social-links a {
            color: white;
            text-decoration: none;
            display: block;
            margin-bottom: 5px;
        }

        .social-links a:hover {
            text-decoration: underline;
        }

        /* Модальное окно */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            overflow-y: auto;
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 8px;
            width: 90%;
            max-width: 1000px;
            position: relative;
            max-height: 90vh;
            overflow-y: auto;
        }

        .close {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        /* Детальная страница товара */
        .product-detail {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .product-gallery {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .main-image {
            width: 100%;
            border-radius: 8px;
            overflow: hidden;
        }

        .main-image img, .main-image video {
            width: 100%;
            max-height: 500px;
            object-fit: cover;
            display: block;
        }

        .thumbnail-gallery {
            display: flex;
            gap: 10px;
            overflow-x: auto;
            padding: 10px 0;
        }

        .thumbnail {
            width: 80px;
            height: 80px;
            border-radius: 4px;
            overflow: hidden;
            cursor: pointer;
            border: 2px solid transparent;
            transition: border-color 0.3s;
            flex-shrink: 0;
        }

        .thumbnail.active {
            border-color: var(--primary-color);
        }

        .thumbnail img, .thumbnail video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .product-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        .product-info-detailed {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .product-title {
            font-size: 2rem;
            color: var(--dark-color);
        }

        .product-price-detailed {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-color);
        }

        .product-specs {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .spec-item {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .spec-label {
            font-weight: bold;
            color: var(--dark-color);
        }

        .spec-value {
            color: #666;
        }

        .product-description-detailed {
            line-height: 1.6;
            color: #555;
        }

        .product-actions {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
        }

        /* Вкладки администратора */
        .admin-tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #ddd;
        }

        .admin-tab {
            padding: 10px 20px;
            cursor: pointer;
            border: none;
            background: none;
            font-size: 16px;
            transition: all 0.3s;
        }

        .admin-tab.active {
            border-bottom: 3px solid var(--primary-color);
            color: var(--primary-color);
            font-weight: bold;
        }

        .admin-tab-content {
            display: none;
        }

        .admin-tab-content.active {
            display: block;
        }

        /* Формы администратора */
        .admin-form {
            margin-bottom: 30px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .form-group textarea {
            height: 100px;
            resize: vertical;
        }

        .form-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .form-buttons button {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .save-btn {
            background-color: var(--secondary-color);
            color: white;
        }

        .save-btn:hover {
            background-color: #45a049;
        }

        .cancel-btn {
            background-color: #f44336;
            color: white;
        }

        .cancel-btn:hover {
            background-color: #d32f2f;
        }

        .import-btn {
            background-color: #2196F3;
            color: white;
        }

        .import-btn:hover {
            background-color: #0b7dda;
        }

        /* Список товаров в админке */
        .admin-product-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border: 1px solid #eee;
            border-radius: 4px;
            margin-bottom: 10px;
        }

        .admin-product-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .admin-product-image {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 4px;
        }

        .admin-product-details h4 {
            margin-bottom: 5px;
        }

        .admin-product-actions {
            display: flex;
            gap: 10px;
        }

        .edit-btn, .delete-btn {
            padding: 5px 10px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .edit-btn {
            background-color: #2196F3;
            color: white;
        }

        .edit-btn:hover {
            background-color: #0b7dda;
        }

        .delete-btn {
            background-color: #f44336;
            color: white;
        }

        .delete-btn:hover {
            background-color: #d32f2f;
        }

        /* Форма заказа */
        .order-form {
            margin-top: 20px;
        }

        .order-success {
            text-align: center;
            padding: 20px;
        }

        .order-success h3 {
            color: var(--secondary-color);
            margin-bottom: 15px;
        }

        .telegram-link {
            display: inline-block;
            background-color: #0088cc;
            color: white;
            padding: 10px 20px;
            border-radius: 4px;
            text-decoration: none;
            margin-top: 15px;
        }

        /* Информация о доставке */
        .delivery-notice {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 4px;
            padding: 10px;
            margin: 15px 0;
            font-size: 0.9rem;
            color: #856404;
        }
        
        .delivery-notice h4 {
            margin-bottom: 5px;
            color: #856404;
        }
        
        .form-note {
            font-size: 0.8rem;
            color: #666;
            margin-top: 5px;
            font-style: italic;
        }

        /* Импорт товаров */
        .import-section {
            margin-top: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #f9f9f9;
        }

        .import-instructions {
            margin-bottom: 20px;
            padding: 15px;
            background-color: #e3f2fd;
            border-radius: 4px;
            border-left: 4px solid #2196F3;
        }

        .import-instructions h4 {
            margin-bottom: 10px;
            color: #1976d2;
        }

        .import-instructions ol {
            margin-left: 20px;
        }

        .import-instructions li {
            margin-bottom: 8px;
        }

        .url-list {
            margin-top: 15px;
        }

        .url-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
            padding: 10px;
            background-color: white;
            border-radius: 4px;
            border: 1px solid #ddd;
        }

        .url-text {
            flex: 1;
            word-break: break-all;
        }

        .remove-url {
            background: none;
            border: none;
            color: #f44336;
            cursor: pointer;
            font-size: 18px;
        }

        .import-progress {
            margin-top: 20px;
            display: none;
        }

        .progress-bar {
            height: 20px;
            background-color: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            height: 100%;
            background-color: #4CAF50;
            width: 0%;
            transition: width 0.3s;
        }

        .progress-text {
            text-align: center;
            font-size: 14px;
            color: #666;
        }

        .import-results {
            margin-top: 20px;
            display: none;
        }

        .result-item {
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 4px;
        }

        .result-success {
            background-color: #e8f5e9;
            border-left: 4px solid #4CAF50;
        }

        .result-error {
            background-color: #ffebee;
            border-left: 4px solid #f44336;
        }

        /* Парсинг Flowwow */
        .flowwow-import {
            margin-top: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #fff8e1;
        }

        .flowwow-import h3 {
            color: #ff9800;
            margin-bottom: 15px;
        }

        .flowwow-note {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 4px;
            padding: 10px;
            margin-bottom: 15px;
            font-size: 14px;
        }

        /* Адаптивность */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2rem;
            }
            
            nav ul {
                flex-direction: column;
            }
            
            nav ul li {
                margin: 5px 0;
            }
            
            .footer-content {
                flex-direction: column;
            }
            
            .admin-product-item {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .admin-product-actions {
                margin-top: 10px;
                width: 100%;
                justify-content: flex-end;
            }
            
            .about-content {
                flex-direction: column;
            }
            
            .product-details {
                grid-template-columns: 1fr;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .url-item {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .category-tabs {
                flex-direction: column;
                align-items: center;
            }
            
            .category-tab {
                width: 100%;
                text-align: center;
                margin-bottom: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- Шапка сайта -->
    <header>
        <div class="container">
            <div class="logo" id="site-logo">Флора</div>
            <nav>
                <ul>
                    <li><a href="#home">Главная</a></li>
                    <li><a href="#products">Товары</a></li>
                    <li><a href="#about">О нас</a></li>
                    <li><a href="#contact">Контакты</a></li>
                    <li><button id="admin-btn">Панель админа</button></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Главный баннер -->
    <section id="home" class="hero">
        <div class="container">
            <h1 id="hero-title">Прекрасные цветы для особенных моментов</h1>
            <p id="hero-subtitle">Создаем настроение с 2010 года</p>
            <a href="#products" class="btn">Смотреть каталог</a>
        </div>
    </section>

    <!-- Каталог товаров -->
    <section id="products" class="products">
        <div class="container">
            <h2 id="products-title">Наши товары</h2>
            
            <!-- Вкладки категорий -->
            <div class="category-tabs">
                <button class="category-tab active" data-category="all">Все товары</button>
                <button class="category-tab" data-category="bouquets">Букеты</button>
                <button class="category-tab" data-category="piece">Цветы поштучно</button>
                <button class="category-tab" data-category="potted">Цветы в горшках</button>
                <button class="category-tab" data-category="additional">Доп товары</button>
                <button class="category-tab" data-category="sets">Наборы</button>
            </div>
            
            <!-- Контент категорий -->
            <div id="category-all" class="category-content active">
                <div class="products-grid" id="products-grid-all">
                    <!-- Все товары будут загружаться динамически -->
                </div>
            </div>
            
            <div id="category-bouquets" class="category-content">
                <div class="products-grid" id="products-grid-bouquets">
                    <!-- Букеты будут загружаться динамически -->
                </div>
            </div>
            
            <div id="category-piece" class="category-content">
                <div class="products-grid" id="products-grid-piece">
                    <!-- Цветы поштучно будут загружаться динамически -->
                </div>
            </div>
            
            <div id="category-potted" class="category-content">
                <div class="products-grid" id="products-grid-potted">
                    <!-- Цветы в горшках будут загружаться динамически -->
                </div>
            </div>
            
            <div id="category-additional" class="category-content">
                <div class="products-grid" id="products-grid-additional">
                    <!-- Доп товары будут загружаться динамически -->
                </div>
            </div>
            
            <div id="category-sets" class="category-content">
                <div class="products-grid" id="products-grid-sets">
                    <!-- Наборы будут загружаться динамически -->
                </div>
            </div>
        </div>
    </section>

    <!-- О нас -->
    <section id="about" class="about">
        <div class="container">
            <h2 id="about-title">О нашем магазине</h2>
            <div class="about-content">
                <div class="about-text">
                    <p id="about-text">Мы - цветочный магазин "Флора", работаем с 2010 года. Наша миссия - дарить радость и красоту через цветы. Мы тщательно отбираем каждый цветок, чтобы обеспечить высочайшее качество и свежесть наших букетов.</p>
                </div>
                <div class="about-image">
                    <img id="about-image" src="https://images.unsplash.com/photo-1447933601403-0c6688de566e?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" alt="Интерьер магазина">
                </div>
            </div>
        </div>
    </section>

    <!-- Подвал -->
    <footer id="contact">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Контакты</h3>
                    <p id="footer-phone">Телефон: +7 (123) 456-78-90</p>
                    <p id="footer-address">Адрес: ул. Цветочная, 15</p>
                    <p id="footer-email">Email: info@flora.ru</p>
                </div>
                <div class="footer-section">
                    <h3>Часы работы</h3>
                    <p id="footer-hours-weekdays">Пн-Пт: 9:00 - 20:00</p>
                    <p id="footer-hours-weekend">Сб-Вс: 10:00 - 18:00</p>
                </div>
                <div class="footer-section">
                    <h3>Мы в соцсетях</h3>
                    <div class="social-links">
                        <p id="footer-instagram">Instagram: @flora_flowers</p>
                        <p id="footer-vk">VK: vk.com/flora_flowers</p>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Модальное окно детальной страницы товара -->
    <div id="product-detail-modal" class="modal">
        <div class="modal-content">
            <span class="close" id="close-detail">&times;</span>
            <div id="product-detail-content">
                <!-- Контент будет загружаться динамически -->
            </div>
        </div>
    </div>

    <!-- Модальное окно заказа -->
    <div id="order-modal" class="modal">
        <div class="modal-content">
            <span class="close" id="close-order">&times;</span>
            <h2>Оформление заказа</h2>
            
            <!-- Добавляем блок с информацией о доставке -->
            <div class="delivery-notice">
                <h4>📦 Информация о доставке</h4>
                <p>Стоимость и условия доставки уточняются при подтверждении заказа. Наш менеджер свяжется с вами для уточнения деталей доставки после получения заказа.</p>
            </div>
            
            <div id="order-form">
                <div class="form-group">
                    <label for="customer-name">Ваше имя:</label>
                    <input type="text" id="customer-name" required>
                </div>
                <div class="form-group">
                    <label for="customer-phone">Ваш телефон:</label>
                    <input type="tel" id="customer-phone" required>
                </div>
                <div class="form-group">
                    <label for="customer-address">Адрес доставки:</label>
                    <input type="text" id="customer-address" placeholder="Укажите адрес для доставки">
                    <div class="form-note">Если вам нужна доставка, укажите адрес. Стоимость доставки уточняется при подтверждении заказа.</div>
                </div>
                <div class="form-group">
                    <label for="delivery-date">Желаемая дата доставки:</label>
                    <input type="date" id="delivery-date" min="">
                </div>
                <div class="form-group">
                    <label for="delivery-time">Предпочтительное время доставки:</label>
                    <select id="delivery-time">
                        <option value="">Любое время</option>
                        <option value="9:00-12:00">Утро (9:00-12:00)</option>
                        <option value="12:00-15:00">День (12:00-15:00)</option>
                        <option value="15:00-18:00">Вечер (15:00-18:00)</option>
                        <option value="18:00-21:00">Поздний вечер (18:00-21:00)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="order-comment">Комментарий к заказу:</label>
                    <textarea id="order-comment" placeholder="Укажите дополнительные пожелания по доставке или товару"></textarea>
                </div>
                <div class="form-buttons">
                    <button type="button" id="submit-order" class="save-btn">Отправить заказ в Telegram</button>
                    <button type="button" class="cancel-btn" id="cancel-order">Отмена</button>
                </div>
            </div>
            <div id="order-success" class="order-success" style="display: none;">
                <h3>Заказ успешно отправлен!</h3>
                <p>Мы свяжемся с вами в ближайшее время для подтверждения заказа и уточнения деталей доставки.</p>
                <a href="#" id="telegram-link" class="telegram-link" target="_blank">Открыть Telegram</a>
            </div>
        </div>
    </div>

    <!-- Модальное окно администратора -->
    <div id="admin-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Панель администратора</h2>
            
            <!-- Вкладки -->
            <div class="admin-tabs">
                <button class="admin-tab active" data-tab="products">Товары</button>
                <button class="admin-tab" data-tab="flowwow">Импорт с Flowwow</button>
                <button class="admin-tab" data-tab="import">Импорт товаров</button>
                <button class="admin-tab" data-tab="design">Дизайн и контент</button>
                <button class="admin-tab" data-tab="contacts">Контакты</button>
                <button class="admin-tab" data-tab="telegram">Telegram</button>
            </div>
            
            <!-- Вкладка товаров -->
            <div id="products-tab" class="admin-tab-content active">
                <!-- Форма добавления/редактирования товара -->
                <div class="admin-form">
                    <h3 id="form-title">Добавить новый товар</h3>
                    <form id="product-form">
                        <input type="hidden" id="edit-id">
                        <div class="form-group">
                            <label for="product-category">Категория:</label>
                            <select id="product-category" required>
                                <option value="bouquets">Букеты</option>
                                <option value="piece">Цветы поштучно</option>
                                <option value="potted">Цветы в горшках</option>
                                <option value="additional">Доп товары</option>
                                <option value="sets">Наборы</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="product-name">Название:</label>
                            <input type="text" id="product-name" required>
                        </div>
                        <div class="form-group">
                            <label for="product-price">Цена (руб.):</label>
                            <input type="number" id="product-price" min="0" step="0.01" required>
                        </div>
                        <div class="form-group">
                            <label for="product-image">Основное изображение (URL):</label>
                            <input type="url" id="product-image" required>
                        </div>
                        <div class="form-group">
                            <label for="product-images">Дополнительные изображения (URL, через запятую):</label>
                            <input type="text" id="product-images" placeholder="https://example.com/image1.jpg, https://example.com/image2.jpg">
                        </div>
                        <div class="form-group">
                            <label for="product-video">Видео (URL, опционально):</label>
                            <input type="url" id="product-video" placeholder="https://example.com/video.mp4">
                        </div>
                        <div class="form-group">
                            <label for="product-composition">Состав/Описание:</label>
                            <textarea id="product-composition"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="product-size">Размер/Характеристики:</label>
                            <input type="text" id="product-size" placeholder="Высота 40 см, диаметр 30 см">
                        </div>
                        <div class="form-group">
                            <label for="product-description">Подробное описание товара:</label>
                            <textarea id="product-description"></textarea>
                        </div>
                        <div class="form-buttons">
                            <button type="submit" class="save-btn">Сохранить</button>
                            <button type="button" class="cancel-btn" id="cancel-product-btn">Отмена</button>
                        </div>
                    </form>
                </div>
                
                <!-- Список товаров для редактирования -->
                <div class="admin-products">
                    <h3>Товары в магазине</h3>
                    <div id="admin-products-list">
                        <!-- Список товаров будет загружаться динамически -->
                    </div>
                </div>
            </div>
            
            <!-- Вкладка импорта с Flowwow -->
            <div id="flowwow-tab" class="admin-tab-content">
                <div class="flowwow-import">
                    <h3>Импорт товаров с Flowwow</h3>
                    
                    <div class="flowwow-note">
                        <strong>Важно:</strong> Для работы этой функции необходимо находиться на странице вашего товара в админке Flowwow. 
                        Скопируйте ссылку из адресной строки браузера и вставьте ее ниже.
                    </div>
                    
                    <div class="admin-form">
                        <div class="form-group">
                            <label for="flowwow-url">Ссылка на товар в Flowwow:</label>
                            <input type="url" id="flowwow-url" placeholder="https://flowwow.com/admin/product/index/?id=12345" required>
                        </div>
                        <div class="form-buttons">
                            <button type="button" id="parse-flowwow" class="import-btn">Получить данные с Flowwow</button>
                        </div>
                    </div>
                    
                    <div class="import-progress" id="flowwow-progress" style="display: none;">
                        <h4>Получение данных с Flowwow...</h4>
                        <div class="progress-bar">
                            <div class="progress-fill" id="flowwow-progress-fill"></div>
                        </div>
                        <div class="progress-text" id="flowwow-progress-text">0%</div>
                    </div>
                    
                    <div class="import-results" id="flowwow-results" style="display: none;">
                        <h4>Результаты парсинга:</h4>
                        <div id="flowwow-results-list"></div>
                    </div>
                </div>
            </div>
            
            <!-- Вкладка импорта товаров -->
            <div id="import-tab" class="admin-tab-content">
                <div class="import-section">
                    <h3>Импорт товаров с внешней платформы</h3>
                    
                    <div class="import-instructions">
                        <h4>Как использовать:</h4>
                        <ol>
                            <li>Скопируйте ссылки на товары с вашего магазина на внешней платформе</li>
                            <li>Вставьте каждую ссылку в поле ниже и нажмите "Добавить ссылку"</li>
                            <li>Когда добавите все ссылки, нажмите "Импортировать товары"</li>
                            <li>Система автоматически создаст товары на вашем сайте</li>
                        </ol>
                    </div>
                    
                    <div class="admin-form">
                        <div class="form-group">
                            <label for="product-url">Ссылка на товар:</label>
                            <input type="url" id="product-url" placeholder="https://example.com/product/123">
                        </div>
                        <div class="form-buttons">
                            <button type="button" id="add-url" class="import-btn">Добавить ссылку</button>
                        </div>
                    </div>
                    
                    <div class="url-list" id="url-list">
                        <!-- Список ссылок будет добавляться здесь -->
                    </div>
                    
                    <div class="form-buttons">
                        <button type="button" id="import-products" class="save-btn" disabled>Импортировать товары</button>
                        <button type="button" id="clear-urls" class="cancel-btn">Очистить список</button>
                    </div>
                    
                    <div class="import-progress" id="import-progress">
                        <h4>Импорт товаров...</h4>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progress-fill"></div>
                        </div>
                        <div class="progress-text" id="progress-text">0%</div>
                    </div>
                    
                    <div class="import-results" id="import-results">
                        <h4>Результаты импорта:</h4>
                        <div id="results-list"></div>
                    </div>
                </div>
            </div>
            
            <!-- Вкладка дизайна и контента -->
            <div id="design-tab" class="admin-tab-content">
                <div class="admin-form">
                    <h3>Настройки дизайна и контента</h3>
                    <form id="design-form">
                        <div class="form-group">
                            <label for="site-logo-input">Название магазина (лого):</label>
                            <input type="text" id="site-logo-input" required>
                        </div>
                        <div class="form-group">
                            <label for="hero-title-input">Заголовок на главной:</label>
                            <input type="text" id="hero-title-input" required>
                        </div>
                        <div class="form-group">
                            <label for="hero-subtitle-input">Подзаголовок на главной:</label>
                            <input type="text" id="hero-subtitle-input" required>
                        </div>
                        <div class="form-group">
                            <label for="hero-image-input">Фон главной (URL изображения):</label>
                            <input type="url" id="hero-image-input" required>
                        </div>
                        <div class="form-group">
                            <label for="about-title-input">Заголовок "О нас":</label>
                            <input type="text" id="about-title-input" required>
                        </div>
                        <div class="form-group">
                            <label for="about-text-input">Текст "О нас":</label>
                            <textarea id="about-text-input" required></textarea>
                        </div>
                        <div class="form-group">
                            <label for="about-image-input">Изображение "О нас" (URL):</label>
                            <input type="url" id="about-image-input" required>
                        </div>
                        <div class="form-group">
                            <label for="products-title-input">Заголовок раздела товаров:</label>
                            <input type="text" id="products-title-input" required>
                        </div>
                        <div class="form-buttons">
                            <button type="submit" class="save-btn">Сохранить настройки</button>
                        </div>
                    </form>
                </div>
            </div>
            
            <!-- Вкладка контактов -->
            <div id="contacts-tab" class="admin-tab-content">
                <div class="admin-form">
                    <h3>Контактная информация</h3>
                    <form id="contacts-form">
                        <div class="form-group">
                            <label for="footer-phone-input">Телефон:</label>
                            <input type="text" id="footer-phone-input" required>
                        </div>
                        <div class="form-group">
                            <label for="footer-address-input">Адрес:</label>
                            <input type="text" id="footer-address-input" required>
                        </div>
                        <div class="form-group">
                            <label for="footer-email-input">Email:</label>
                            <input type="email" id="footer-email-input" required>
                        </div>
                        <div class="form-group">
                            <label for="footer-hours-weekdays-input">Часы работы (будни):</label>
                            <input type="text" id="footer-hours-weekdays-input" required>
                        </div>
                        <div class="form-group">
                            <label for="footer-hours-weekend-input">Часы работы (выходные):</label>
                            <input type="text" id="footer-hours-weekend-input" required>
                        </div>
                        <div class="form-group">
                            <label for="footer-instagram-input">Instagram:</label>
                            <input type="text" id="footer-instagram-input" required>
                        </div>
                        <div class="form-group">
                            <label for="footer-vk-input">VK:</label>
                            <input type="text" id="footer-vk-input" required>
                        </div>
                        <div class="form-buttons">
                            <button type="submit" class="save-btn">Сохранить контакты</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Вкладка Telegram -->
            <div id="telegram-tab" class="admin-tab-content">
                <div class="admin-form">
                    <h3>Настройки Telegram</h3>
                    <p>Для получения заказов в Telegram вам нужно:</p>
                    <ol>
                        <li>Создать бота через @BotFather</li>
                        <li>Получить токен бота</li>
                        <li>Узнать ваш Chat ID (можно через @userinfobot)</li>
                        <li>Заполнить данные ниже</li>
                    </ol>
                    <form id="telegram-form">
                        <div class="form-group">
                            <label for="telegram-bot-token">Токен бота Telegram:</label>
                            <input type="text" id="telegram-bot-token" placeholder="123456789:ABCdefGHIjklMNOpqrsTUVwxyz">
                        </div>
                        <div class="form-group">
                            <label for="telegram-chat-id">Ваш Chat ID:</label>
                            <input type="text" id="telegram-chat-id" placeholder="123456789">
                        </div>
                        <div class="form-buttons">
                            <button type="submit" class="save-btn">Сохранить настройки Telegram</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Данные по умолчанию с категориями
        let products = JSON.parse(localStorage.getItem('flowerShopProducts')) || [
            {
                id: 1,
                name: "Букет роз",
                price: 2500,
                image: "https://images.unsplash.com/photo-1563241527-3004b7be0ffd?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                images: [
                    "https://images.unsplash.com/photo-1563241527-3004b7be0ffd?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                    "https://images.unsplash.com/photo-1487070183333-3c0b8a2656ce?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                    "https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60"
                ],
                video: "",
                composition: "25 красных роз, зелень, упаковка",
                size: "Высота 40 см, диаметр 30 см",
                description: "Прекрасный букет из 25 красных роз - идеальный подарок для особого случая. Свежие цветы, собранные вручную нашими флористами, будут радовать вас и ваших близких долгое время.",
                category: "bouquets"
            },
            {
                id: 2,
                name: "Тюльпаны",
                price: 1500,
                image: "https://images.unsplash.com/photo-1582794543139-8ac9cad0c8e3?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                images: [
                    "https://images.unsplash.com/photo-1582794543139-8ac9cad0c8e3?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                    "https://images.unsplash.com/photo-1490750967868-88aa4486c946?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60"
                ],
                video: "",
                composition: "15 тюльпанов разных цветов, зелень, упаковка",
                size: "Высота 35 см, диаметр 25 см",
                description: "Свежие тюльпаны разных цветов создают нежное и весеннее настроение. Идеальный выбор для романтического подарка или просто чтобы поднять настроение.",
                category: "bouquets"
            },
            {
                id: 3,
                name: "Орхидеи",
                price: 3200,
                image: "https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                images: [
                    "https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                    "https://images.unsplash.com/photo-1463154545680-d59320fd685d?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60"
                ],
                video: "",
                composition: "Орхидея фаленопсис в горшке, декоративная упаковка",
                size: "Высота 50 см вместе с горшком",
                description: "Элегантные орхидеи в горшке - прекрасный подарок, который будет радовать долгое время. Неприхотливые в уходе, эти цветы станут украшением любого интерьера.",
                category: "potted"
            },
            {
                id: 4,
                name: "Красная роза",
                price: 350,
                image: "https://images.unsplash.com/photo-1595003161985-d8b3dd3197c7?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                images: [
                    "https://images.unsplash.com/photo-1595003161985-d8b3dd3197c7?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60"
                ],
                video: "",
                composition: "Свежая красная роза, длина стебля 60 см",
                size: "Высота 60 см",
                description: "Прекрасная красная роза премиум-класса. Идеально подходит для создания собственных букетов или как одиночный подарок.",
                category: "piece"
            },
            {
                id: 5,
                name: "Подарочная открытка",
                price: 150,
                image: "https://images.unsplash.com/photo-1511795409834-ef04bbd61622?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                images: [
                    "https://images.unsplash.com/photo-1511795409834-ef04bbd61622?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60"
                ],
                video: "",
                composition: "Дизайнерская открытка с конвертом",
                size: "10x15 см",
                description: "Элегантная подарочная открытка для любых торжественных случаев. Можно добавить персональное поздравление.",
                category: "additional"
            },
            {
                id: 6,
                name: "Набор 'Для нее'",
                price: 4500,
                image: "https://images.unsplash.com/photo-1544787219-7f47ccb76574?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                images: [
                    "https://images.unsplash.com/photo-1544787219-7f47ccb76574?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60"
                ],
                video: "",
                composition: "Букет роз, шоколадные конфеты, мягкая игрушка, открытка",
                size: "Коробка 30x30x15 см",
                description: "Идеальный подарок для женщины на любой праздник. В набор входят цветы, сладости и милый подарок.",
                category: "sets"
            }
        ];

        // Настройки сайта по умолчанию
        let siteSettings = JSON.parse(localStorage.getItem('flowerShopSettings')) || {
            siteLogo: "Флора",
            heroTitle: "Прекрасные цветы для особенных моментов",
            heroSubtitle: "Создаем настроение с 2010 года",
            heroImage: "https://images.unsplash.com/photo-1487070183333-3c0b8a2656ce?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",
            aboutTitle: "О нашем магазине",
            aboutText: "Мы - цветочный магазин \"Флора\", работаем с 2010 года. Наша миссия - дарить радость и красоту через цветы. Мы тщательно отбираем каждый цветок, чтобы обеспечить высочайшее качество и свежесть наших букетов.",
            aboutImage: "https://images.unsplash.com/photo-1447933601403-0c6688de566e?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
            productsTitle: "Наши товары",
            footerPhone: "Телефон: +7 (123) 456-78-90",
            footerAddress: "Адрес: ул. Цветочная, 15",
            footerEmail: "Email: info@flora.ru",
            footerHoursWeekdays: "Пн-Пт: 9:00 - 20:00",
            footerHoursWeekend: "Сб-Вс: 10:00 - 18:00",
            footerInstagram: "Instagram: @flora_flowers",
            footerVk: "VK: vk.com/flora_flowers",
            telegramBotToken: "",
            telegramChatId: ""
        };

        // Список URL для импорта
        let importUrls = JSON.parse(localStorage.getItem('flowerShopImportUrls')) || [];

        // Элементы DOM
        const productsGrid = document.getElementById('products-grid-all');
        const adminModal = document.getElementById('admin-modal');
        const orderModal = document.getElementById('order-modal');
        const productDetailModal = document.getElementById('product-detail-modal');
        const productDetailContent = document.getElementById('product-detail-content');
        const adminBtn = document.getElementById('admin-btn');
        const closeBtn = document.querySelector('.close');
        const closeOrderBtn = document.getElementById('close-order');
        const closeDetailBtn = document.getElementById('close-detail');
        const productForm = document.getElementById('product-form');
        const designForm = document.getElementById('design-form');
        const contactsForm = document.getElementById('contacts-form');
        const telegramForm = document.getElementById('telegram-form');
        const adminProductsList = document.getElementById('admin-products-list');
        const cancelProductBtn = document.getElementById('cancel-product-btn');
        const cancelOrderBtn = document.getElementById('cancel-order');
        const submitOrderBtn = document.getElementById('submit-order');
        const adminTabs = document.querySelectorAll('.admin-tab');
        const adminTabContents = document.querySelectorAll('.admin-tab-content');
        const orderForm = document.getElementById('order-form');
        const orderSuccess = document.getElementById('order-success');
        const telegramLink = document.getElementById('telegram-link');

        // Элементы категорий
        const categoryTabs = document.querySelectorAll('.category-tab');
        const categoryContents = document.querySelectorAll('.category-content');

        // Элементы импорта
        const productUrlInput = document.getElementById('product-url');
        const addUrlBtn = document.getElementById('add-url');
        const urlList = document.getElementById('url-list');
        const importProductsBtn = document.getElementById('import-products');
        const clearUrlsBtn = document.getElementById('clear-urls');
        const importProgress = document.getElementById('import-progress');
        const progressFill = document.getElementById('progress-fill');
        const progressText = document.getElementById('progress-text');
        const importResults = document.getElementById('import-results');
        const resultsList = document.getElementById('results-list');

        // Элементы Flowwow
        const flowwowUrlInput = document.getElementById('flowwow-url');
        const parseFlowwowBtn = document.getElementById('parse-flowwow');
        const flowwowProgress = document.getElementById('flowwow-progress');
        const flowwowProgressFill = document.getElementById('flowwow-progress-fill');
        const flowwowProgressText = document.getElementById('flowwow-progress-text');
        const flowwowResults = document.getElementById('flowwow-results');
        const flowwowResultsList = document.getElementById('flowwow-results-list');

        // Переменные для управления состоянием
        let editMode = false;
        let currentEditId = null;
        let currentOrderProduct = null;
        let currentMediaIndex = 0;

        // Функция для отображения товаров по категориям
        function displayProductsByCategory() {
            // Очищаем все категории
            document.querySelectorAll('.products-grid').forEach(grid => {
                grid.innerHTML = '';
            });
            
            // Отображаем товары по категориям
            products.forEach(product => {
                const productCard = createProductCard(product);
                
                // Добавляем в соответствующую категорию
                const categoryGrid = document.getElementById(`products-grid-${product.category}`);
                if (categoryGrid) {
                    categoryGrid.appendChild(productCard);
                }
                
                // Также добавляем в "Все товары"
                const allGrid = document.getElementById('products-grid-all');
                if (allGrid) {
                    const allProductCard = createProductCard(product);
                    allGrid.appendChild(allProductCard);
                }
            });
        }

        // Функция для создания карточки товара
        function createProductCard(product) {
            const productCard = document.createElement('div');
            productCard.className = 'product-card';
            
            productCard.innerHTML = `
                <img src="${product.image}" alt="${product.name}" class="product-image">
                <div class="product-info">
                    <h3 class="product-name">${product.name}</h3>
                    <p class="product-price">${product.price} руб.</p>
                    <p class="product-description">${product.description.substring(0, 100)}...</p>
                    <button class="order-btn" data-id="${product.id}">Заказать</button>
                </div>
            `;
            
            // Добавляем обработчик для открытия детальной страницы
            productCard.addEventListener('click', (e) => {
                if (!e.target.classList.contains('order-btn')) {
                    openProductDetail(product.id);
                }
            });
            
            // Добавляем обработчик для кнопки заказа
            const orderBtn = productCard.querySelector('.order-btn');
            orderBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                const id = parseInt(e.target.getAttribute('data-id'));
                openOrderModal(id);
            });
            
            return productCard;
        }

        // Функция для переключения категорий
        function switchCategory(category) {
            // Убираем активный класс у всех вкладок и контента
            categoryTabs.forEach(tab => tab.classList.remove('active'));
            categoryContents.forEach(content => content.classList.remove('active'));
            
            // Добавляем активный класс текущей вкладке и контенту
            document.querySelector(`[data-category="${category}"]`).classList.add('active');
            document.getElementById(`category-${category}`).classList.add('active');
        }

        // Функция для открытия детальной страницы товара
        function openProductDetail(productId) {
            const product = products.find(p => p.id === productId);
            if (product) {
                currentMediaIndex = 0;
                
                // Создаем галерею медиа (изображения + видео)
                const mediaItems = [...product.images];
                if (product.video) {
                    mediaItems.push(product.video);
                }
                
                // Создаем HTML для детальной страницы
                productDetailContent.innerHTML = `
                    <div class="product-detail">
                        <div class="product-gallery">
                            <div class="main-image">
                                ${mediaItems[currentMediaIndex].endsWith('.mp4') || mediaItems[currentMediaIndex].includes('video') ? 
                                    `<video controls><source src="${mediaItems[currentMediaIndex]}" type="video/mp4">Ваш браузер не поддерживает видео.</video>` : 
                                    `<img src="${mediaItems[currentMediaIndex]}" alt="${product.name}">`
                                }
                            </div>
                            ${mediaItems.length > 1 ? `
                                <div class="thumbnail-gallery">
                                    ${mediaItems.map((media, index) => `
                                        <div class="thumbnail ${index === currentMediaIndex ? 'active' : ''}" data-index="${index}">
                                            ${media.endsWith('.mp4') || media.includes('video') ? 
                                                `<video><source src="${media}" type="video/mp4"></video>` : 
                                                `<img src="${media}" alt="${product.name} ${index + 1}">`
                                            }
                                        </div>
                                    `).join('')}
                                </div>
                            ` : ''}
                        </div>
                        <div class="product-details">
                            <div class="product-info-detailed">
                                <h1 class="product-title">${product.name}</h1>
                                <div class="product-price-detailed">${product.price} руб.</div>
                                <div class="product-specs">
                                    <div class="spec-item">
                                        <div class="spec-label">${product.category === 'bouquets' || product.category === 'sets' ? 'Состав:' : 'Описание:'}</div>
                                        <div class="spec-value">${product.composition}</div>
                                    </div>
                                    <div class="spec-item">
                                        <div class="spec-label">${product.category === 'bouquets' || product.category === 'potted' ? 'Размер:' : 'Характеристики:'}</div>
                                        <div class="spec-value">${product.size}</div>
                                    </div>
                                </div>
                                <div class="product-description-detailed">
                                    ${product.description}
                                </div>
                            </div>
                            <div class="product-actions">
                                <div class="action-buttons">
                                    <button class="order-btn" id="detail-order-btn">Заказать</button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                // Добавляем обработчики для миниатюр
                if (mediaItems.length > 1) {
                    document.querySelectorAll('.thumbnail').forEach(thumb => {
                        thumb.addEventListener('click', () => {
                            const index = parseInt(thumb.getAttribute('data-index'));
                            changeMainMedia(mediaItems, index);
                        });
                    });
                }
                
                // Добавляем обработчик для кнопки заказа
                document.getElementById('detail-order-btn').addEventListener('click', () => {
                    productDetailModal.style.display = 'none';
                    openOrderModal(productId);
                });
                
                productDetailModal.style.display = 'block';
            }
        }

        // Функция для смены основного медиа в галерее
        function changeMainMedia(mediaItems, index) {
            currentMediaIndex = index;
            
            // Обновляем основное изображение/видео
            const mainImage = document.querySelector('.main-image');
            mainImage.innerHTML = mediaItems[index].endsWith('.mp4') || mediaItems[index].includes('video') ? 
                `<video controls><source src="${mediaItems[index]}" type="video/mp4">Ваш браузер не поддерживает видео.</video>` : 
                `<img src="${mediaItems[index]}" alt="Основное изображение">`;
            
            // Обновляем активную миниатюру
            document.querySelectorAll('.thumbnail').forEach((thumb, i) => {
                if (i === index) {
                    thumb.classList.add('active');
                } else {
                    thumb.classList.remove('active');
                }
            });
        }

        // Функция для открытия модального окна заказа
        function openOrderModal(productId) {
            currentOrderProduct = products.find(p => p.id === productId);
            if (currentOrderProduct) {
                orderModal.style.display = 'block';
                orderForm.style.display = 'block';
                orderSuccess.style.display = 'none';
            }
        }

        // Функция для отправки заказа в Telegram
        function sendOrderToTelegram(orderData) {
            // Проверяем, настроены ли данные Telegram
            if (!siteSettings.telegramBotToken || !siteSettings.telegramChatId) {
                alert('Владелец сайта не настроил получение заказов в Telegram. Пожалуйста, свяжитесь по телефону.');
                return false;
            }

            const botToken = siteSettings.telegramBotToken;
            const chatId = siteSettings.telegramChatId;
            
            // Формируем текст сообщения с информацией о доставке
            const message = `Новый заказ из цветочного магазина:\n\n` +
                           `Товар: ${orderData.productName}\n` +
                           `Цена: ${orderData.productPrice} руб.\n` +
                           `Имя: ${orderData.customerName}\n` +
                           `Телефон: ${orderData.customerPhone}\n` +
                           `Адрес: ${orderData.customerAddress || 'Не указан'}\n` +
                           `Дата доставки: ${orderData.deliveryDate || 'Не указана'}\n` +
                           `Время доставки: ${orderData.deliveryTime || 'Не указано'}\n` +
                           `Комментарий: ${orderData.orderComment || 'Отсутствует'}\n\n` +
                           `Время заказа: ${new Date().toLocaleString()}\n\n` +
                           `❗️ НЕОБХОДИМО УТОЧНИТЬ ДОСТАВКУ`;

            // Кодируем сообщение для URL
            const encodedMessage = encodeURIComponent(message);
            
            // Формируем URL для запроса к API Telegram
            const url = `https://api.telegram.org/bot${botToken}/sendMessage?chat_id=${chatId}&text=${encodedMessage}`;
            
            // Отправляем запрос
            fetch(url)
                .then(response => response.json())
                .then(data => {
                    if (data.ok) {
                        console.log('Заказ отправлен в Telegram');
                        return true;
                    } else {
                        console.error('Ошибка отправки заказа в Telegram:', data);
                        return false;
                    }
                })
                .catch(error => {
                    console.error('Ошибка отправки заказа:', error);
                    return false;
                });
            
            return true;
        }

        // Функция для парсинга данных с Flowwow
        function parseFlowwowData(url) {
            // Показываем прогресс
            flowwowProgress.style.display = 'block';
            flowwowResults.style.display = 'block';
            flowwowResultsList.innerHTML = '';
            
            // Имитируем процесс парсинга с задержкой
            setTimeout(() => {
                flowwowProgressFill.style.width = '25%';
                flowwowProgressText.textContent = '25% - Получение данных...';
            }, 500);
            
            setTimeout(() => {
                flowwowProgressFill.style.width = '50%';
                flowwowProgressText.textContent = '50% - Анализ страницы...';
            }, 1000);
            
            setTimeout(() => {
                flowwowProgressFill.style.width = '75%';
                flowwowProgressText.textContent = '75% - Извлечение информации...';
            }, 1500);
            
            setTimeout(() => {
                flowwowProgressFill.style.width = '100%';
                flowwowProgressText.textContent = '100% - Завершено!';
                
                // В реальном приложении здесь был бы запрос к серверу для парсинга Flowwow
                // Поскольку мы не можем сделать это из браузера из-за CORS, создаем фиктивные данные
                
                // Извлекаем ID товара из URL
                const urlParams = new URLSearchParams(new URL(url).search);
                const productId = urlParams.get('id') || 'unknown';
                
                // Создаем фиктивные данные на основе ID
                const productData = generateFlowwowProductData(productId);
                
                // Заполняем форму данными
                fillProductForm(productData);
                
                // Показываем результаты
                const resultItem = document.createElement('div');
                resultItem.className = 'result-item result-success';
                resultItem.innerHTML = `✓ Данные успешно получены с Flowwow! Товар "${productData.name}" готов к сохранению.`;
                flowwowResultsList.appendChild(resultItem);
                
                // Скрываем прогресс через 2 секунды
                setTimeout(() => {
                    flowwowProgress.style.display = 'none';
                    
                    // Переключаемся на вкладку товаров
                    adminTabs.forEach(t => t.classList.remove('active'));
                    adminTabContents.forEach(c => c.classList.remove('active'));
                    
                    document.querySelector('[data-tab="products"]').classList.add('active');
                    document.getElementById('products-tab').classList.add('active');
                }, 2000);
                
            }, 2000);
        }

        // Функция для генерации фиктивных данных Flowwow
        function generateFlowwowProductData(productId) {
            // Генерируем данные на основе ID для разнообразия
            const seed = parseInt(productId) || 1;
            
            const productNames = [
                "Элегантный букет роз", 
                "Свежие тюльпаны", 
                "Нежные орхидеи", 
                "Яркие герберы", 
                "Романтичные пионы",
                "Экзотические лилии",
                "Классические хризантемы",
                "Полевые цветы",
                "Свадебный букет",
                "Букет для мужчины"
            ];
            
            const productDescriptions = [
                "Прекрасный букет для особого случая. Свежие цветы, собранные вручную нашими флористами, будут радовать вас и ваших близких долгое время.",
                "Свежие цветы с доставкой. Идеальный выбор для романтического подарка или просто чтобы поднять настроение.",
                "Идеальный подарок для любимых. Эти цветы станут украшением любого интерьера и будут радовать вас долгое время.",
                "Создайте праздничное настроение с этим ярким букетом. Цветы тщательно отобраны нашими флористами для обеспечения высочайшего качества.",
                "Эксклюзивная композиция от нашего флориста. Уникальный дизайн и свежесть цветов гарантированы.",
                "Экзотические цветы для истинных ценителей красоты. Редкие сорта, привезенные специально для вас.",
                "Классика, которая никогда не выходит из моды. Идеальный выбор для торжественных мероприятий.",
                "Нежные полевые цветы, собранные вручную. Напоминают о лете и теплых днях.",
                "Идеальный свадебный букет для невесты. Создан с учетом последних тенденций флористики.",
                "Строгий и элегантный букет для мужчины. Подчеркивает индивидуальность и стиль."
            ];
            
            const productCompositions = [
                "25 роз, зелень, упаковка",
                "15 тюльпанов, зелень, упаковка",
                "Орхидея в горшке, декоративная упаковка",
                "20 гербер, зелень, упаковка",
                "10 пионов, зелень, упаковка",
                "5 лилий, зелень, декоративные элементы",
                "30 хризантем, зелень, упаковка",
                "Полевые цветы, зелень, льняная упаковка",
                "Белые розы, орхидеи, зелень, свадебная лента",
                "Антуриумы, зелень, мужская упаковка"
            ];
            
            const productSizes = [
                "Высота 40 см, диаметр 30 см",
                "Высота 35 см, диаметр 25 см",
                "Высота 50 см вместе с горшком",
                "Высота 45 см, диаметр 35 см",
                "Высота 38 см, диаметр 28 см",
                "Высота 55 см, диаметр 40 см",
                "Высота 42 см, диаметр 32 см",
                "Высота 30 см, диаметр 20 см",
                "Высота 48 см, диаметр 38 см",
                "Высота 36 см, диаметр 26 см"
            ];
            
            const productImages = [
                "https://images.unsplash.com/photo-1563241527-3004b7be0ffd?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                "https://images.unsplash.com/photo-1582794543139-8ac9cad0c8e3?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                "https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                "https://images.unsplash.com/photo-1572853135042-8ba4cf28d0c5?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                "https://images.unsplash.com/photo-1597848212624-e6d4bd7d132d?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                "https://images.unsplash.com/photo-1596464716127-f2a82984de30?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                "https://images.unsplash.com/photo-1574856344992-7b8c3bb0a5c3?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                "https://images.unsplash.com/photo-1591637333184-19aa84b3e01f?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                "https://images.unsplash.com/photo-1519225421980-715cb0215aed?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                "https://images.unsplash.com/photo-1570033313599-d5d6972e5279?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60"
            ];
            
            const index = seed % 10;
            const price = Math.floor(Math.random() * 3000) + 1000;
            
            return {
                name: productNames[index],
                price: price,
                image: productImages[index],
                images: [productImages[index], productImages[(index + 1) % 10], productImages[(index + 2) % 10]],
                video: "",
                composition: productCompositions[index],
                size: productSizes[index],
                description: productDescriptions[index],
                category: "bouquets"
            };
        }

        // Функция для заполнения формы данными
        function fillProductForm(productData) {
            document.getElementById('product-category').value = productData.category;
            document.getElementById('product-name').value = productData.name;
            document.getElementById('product-price').value = productData.price;
            document.getElementById('product-image').value = productData.image;
            document.getElementById('product-images').value = productData.images.join(', ');
            document.getElementById('product-video').value = productData.video;
            document.getElementById('product-composition').value = productData.composition;
            document.getElementById('product-size').value = productData.size;
            document.getElementById('product-description').value = productData.description;
            
            // Сбрасываем режим редактирования
            editMode = false;
            currentEditId = null;
            document.getElementById('edit-id').value = '';
            document.getElementById('form-title').textContent = 'Добавить новый товар';
        }

        // Функция для отображения товаров в панели администратора
        function displayAdminProducts() {
            adminProductsList.innerHTML = '';
            
            products.forEach(product => {
                const productItem = document.createElement('div');
                productItem.className = 'admin-product-item';
                
                // Определяем название категории для отображения
                let categoryName = '';
                switch(product.category) {
                    case 'bouquets': categoryName = 'Букеты'; break;
                    case 'piece': categoryName = 'Цветы поштучно'; break;
                    case 'potted': categoryName = 'Цветы в горшках'; break;
                    case 'additional': categoryName = 'Доп товары'; break;
                    case 'sets': categoryName = 'Наборы'; break;
                    default: categoryName = product.category;
                }
                
                productItem.innerHTML = `
                    <div class="admin-product-info">
                        <img src="${product.image}" alt="${product.name}" class="admin-product-image">
                        <div class="admin-product-details">
                            <h4>${product.name}</h4>
                            <p>${product.price} руб. | ${categoryName}</p>
                        </div>
                    </div>
                    <div class="admin-product-actions">
                        <button class="edit-btn" data-id="${product.id}">Редактировать</button>
                        <button class="delete-btn" data-id="${product.id}">Удалить</button>
                    </div>
                `;
                
                adminProductsList.appendChild(productItem);
            });
            
            // Добавляем обработчики событий для кнопок редактирования и удаления
            document.querySelectorAll('.edit-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const id = parseInt(e.target.getAttribute('data-id'));
                    editProduct(id);
                });
            });
            
            document.querySelectorAll('.delete-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const id = parseInt(e.target.getAttribute('data-id'));
                    deleteProduct(id);
                });
            });
        }

        // Функция для отображения списка URL для импорта
        function displayImportUrls() {
            urlList.innerHTML = '';
            
            if (importUrls.length === 0) {
                urlList.innerHTML = '<p>Список ссылок пуст</p>';
                importProductsBtn.disabled = true;
                return;
            }
            
            importUrls.forEach((url, index) => {
                const urlItem = document.createElement('div');
                urlItem.className = 'url-item';
                urlItem.innerHTML = `
                    <span class="url-text">${url}</span>
                    <button class="remove-url" data-index="${index}">×</button>
                `;
                urlList.appendChild(urlItem);
            });
            
            importProductsBtn.disabled = false;
            
            // Добавляем обработчики для кнопок удаления
            document.querySelectorAll('.remove-url').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const index = parseInt(e.target.getAttribute('data-index'));
                    removeImportUrl(index);
                });
            });
        }

        // Функция для добавления URL в список импорта
        function addImportUrl() {
            const url = productUrlInput.value.trim();
            
            if (!url) {
                alert('Введите ссылку на товар');
                return;
            }
            
            // Проверяем, что ссылка не дублируется
            if (importUrls.includes(url)) {
                alert('Эта ссылка уже добавлена в список');
                return;
            }
            
            importUrls.push(url);
            saveImportUrls();
            displayImportUrls();
            productUrlInput.value = '';
        }

        // Функция для удаления URL из списка импорта
        function removeImportUrl(index) {
            importUrls.splice(index, 1);
            saveImportUrls();
            displayImportUrls();
        }

        // Функция для очистки списка URL
        function clearImportUrls() {
            importUrls = [];
            saveImportUrls();
            displayImportUrls();
        }

        // Функция для импорта товаров по URL
        function importProducts() {
            if (importUrls.length === 0) {
                alert('Нет ссылок для импорта');
                return;
            }
            
            // Показываем прогресс
            importProgress.style.display = 'block';
            importResults.style.display = 'block';
            resultsList.innerHTML = '';
            
            let importedCount = 0;
            let errorCount = 0;
            
            // Имитируем процесс импорта
            importUrls.forEach((url, index) => {
                setTimeout(() => {
                    // В реальном приложении здесь был бы запрос к API платформы
                    // или парсинг страницы для получения данных о товаре
                    
                    // Для демонстрации создаем фиктивный товар на основе URL
                    const productData = parseProductFromUrl(url);
                    
                    if (productData) {
                        // Добавляем товар в список
                        addImportedProduct(productData);
                        importedCount++;
                        
                        // Добавляем успешный результат
                        const resultItem = document.createElement('div');
                        resultItem.className = 'result-item result-success';
                        resultItem.innerHTML = `✓ Успешно: ${productData.name}`;
                        resultsList.appendChild(resultItem);
                    } else {
                        errorCount++;
                        
                        // Добавляем ошибку
                        const resultItem = document.createElement('div');
                        resultItem.className = 'result-item result-error';
                        resultItem.innerHTML = `✗ Ошибка: Не удалось импортировать товар по ссылке ${url}`;
                        resultsList.appendChild(resultItem);
                    }
                    
                    // Обновляем прогресс
                    const progress = Math.round(((index + 1) / importUrls.length) * 100);
                    progressFill.style.width = `${progress}%`;
                    progressText.textContent = `${progress}% (${index + 1} из ${importUrls.length})`;
                    
                    // Если все товары обработаны
                    if (index === importUrls.length - 1) {
                        setTimeout(() => {
                            importProgress.style.display = 'none';
                            
                            // Показываем итоги
                            const summary = document.createElement('div');
                            summary.className = 'result-item result-success';
                            summary.innerHTML = `Импорт завершен! Успешно: ${importedCount}, Ошибок: ${errorCount}`;
                            resultsList.appendChild(summary);
                            
                            // Очищаем список URL после успешного импорта
                            if (importedCount > 0) {
                                clearImportUrls();
                            }
                        }, 500);
                    }
                }, index * 1000); // Имитируем задержку для наглядности
            });
        }

        // Функция для парсинга данных товара из URL (заглушка)
        function parseProductFromUrl(url) {
            // В реальном приложении здесь был бы код для получения данных с платформы
            // Поскольку мы не знаем структуру платформы, создаем фиктивные данные
            
            // Генерируем случайные данные для демонстрации
            const productNames = [
                "Элегантный букет роз", 
                "Свежие тюльпаны", 
                "Нежные орхидеи", 
                "Яркие герберы", 
                "Романтичные пионы"
            ];
            
            const productDescriptions = [
                "Прекрасный букет для особого случая. Свежие цветы, собранные вручную нашими флористами, будут радовать вас и ваших близких долгое время.",
                "Свежие цветы с доставкой. Идеальный выбор для романтического подарка или просто чтобы поднять настроение.",
                "Идеальный подарок для любимых. Эти цветы станут украшением любого интерьера и будут радовать вас долгое время.",
                "Создайте праздничное настроение с этим ярким букетом. Цветы тщательно отобраны нашими флористами для обеспечения высочайшего качества.",
                "Эксклюзивная композиция от нашего флориста. Уникальный дизайн и свежесть цветов гарантированы."
            ];
            
            const productCompositions = [
                "25 роз, зелень, упаковка",
                "15 тюльпанов, зелень, упаковка",
                "Орхидея в горшке, декоративная упаковка",
                "20 гербер, зелень, упаковка",
                "10 пионов, зелень, упаковка"
            ];
            
            const productSizes = [
                "Высота 40 см, диаметр 30 см",
                "Высота 35 см, диаметр 25 см",
                "Высота 50 см вместе с горшком",
                "Высота 45 см, диаметр 35 см",
                "Высота 38 см, диаметр 28 см"
            ];
            
            const productImages = [
                "https://images.unsplash.com/photo-1563241527-3004b7be0ffd?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                "https://images.unsplash.com/photo-1582794543139-8ac9cad0c8e3?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                "https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                "https://images.unsplash.com/photo-1572853135042-8ba4cf28d0c5?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                "https://images.unsplash.com/photo-1563241527-3004b7be0ffd?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60"
            ];
            
            const categories = ["bouquets", "piece", "potted", "additional", "sets"];
            
            const randomIndex = Math.floor(Math.random() * productNames.length);
            const randomCategoryIndex = Math.floor(Math.random() * categories.length);
            
            return {
                name: productNames[randomIndex],
                price: Math.floor(Math.random() * 3000) + 1000,
                image: productImages[randomIndex],
                images: [productImages[randomIndex], productImages[(randomIndex + 1) % 5], productImages[(randomIndex + 2) % 5]],
                video: "",
                composition: productCompositions[randomIndex],
                size: productSizes[randomIndex],
                description: productDescriptions[randomIndex],
                category: categories[randomCategoryIndex]
            };
        }

        // Функция для добавления импортированного товара
        function addImportedProduct(productData) {
            // Генерируем уникальный ID
            const newId = products.length > 0 ? Math.max(...products.map(p => p.id)) + 1 : 1;
            productData.id = newId;
            
            products.push(productData);
            saveProducts();
            displayProductsByCategory();
            displayAdminProducts();
        }

        // Функция для применения настроек сайта
        function applySiteSettings() {
            document.getElementById('site-logo').textContent = siteSettings.siteLogo;
            document.getElementById('hero-title').textContent = siteSettings.heroTitle;
            document.getElementById('hero-subtitle').textContent = siteSettings.heroSubtitle;
            document.querySelector('.hero').style.backgroundImage = `url('${siteSettings.heroImage}')`;
            document.getElementById('about-title').textContent = siteSettings.aboutTitle;
            document.getElementById('about-text').textContent = siteSettings.aboutText;
            document.getElementById('about-image').src = siteSettings.aboutImage;
            document.getElementById('products-title').textContent = siteSettings.productsTitle;
            document.getElementById('footer-phone').textContent = siteSettings.footerPhone;
            document.getElementById('footer-address').textContent = siteSettings.footerAddress;
            document.getElementById('footer-email').textContent = siteSettings.footerEmail;
            document.getElementById('footer-hours-weekdays').textContent = siteSettings.footerHoursWeekdays;
            document.getElementById('footer-hours-weekend').textContent = siteSettings.footerHoursWeekend;
            document.getElementById('footer-instagram').textContent = siteSettings.footerInstagram;
            document.getElementById('footer-vk').textContent = siteSettings.footerVk;
            
            // Заполняем формы в админке
            document.getElementById('site-logo-input').value = siteSettings.siteLogo;
            document.getElementById('hero-title-input').value = siteSettings.heroTitle;
            document.getElementById('hero-subtitle-input').value = siteSettings.heroSubtitle;
            document.getElementById('hero-image-input').value = siteSettings.heroImage;
            document.getElementById('about-title-input').value = siteSettings.aboutTitle;
            document.getElementById('about-text-input').value = siteSettings.aboutText;
            document.getElementById('about-image-input').value = siteSettings.aboutImage;
            document.getElementById('products-title-input').value = siteSettings.productsTitle;
            document.getElementById('footer-phone-input').value = siteSettings.footerPhone.replace('Телефон: ', '');
            document.getElementById('footer-address-input').value = siteSettings.footerAddress.replace('Адрес: ', '');
            document.getElementById('footer-email-input').value = siteSettings.footerEmail.replace('Email: ', '');
            document.getElementById('footer-hours-weekdays-input').value = siteSettings.footerHoursWeekdays.replace('Пн-Пт: ', '');
            document.getElementById('footer-hours-weekend-input').value = siteSettings.footerHoursWeekend.replace('Сб-Вс: ', '');
            document.getElementById('footer-instagram-input').value = siteSettings.footerInstagram.replace('Instagram: ', '');
            document.getElementById('footer-vk-input').value = siteSettings.footerVk.replace('VK: ', '');
            document.getElementById('telegram-bot-token').value = siteSettings.telegramBotToken;
            document.getElementById('telegram-chat-id').value = siteSettings.telegramChatId;
        }

        // Функция для добавления нового товара
        function addProduct(product) {
            // Генерируем уникальный ID
            const newId = products.length > 0 ? Math.max(...products.map(p => p.id)) + 1 : 1;
            product.id = newId;
            
            products.push(product);
            saveProducts();
            displayProductsByCategory();
            displayAdminProducts();
            resetProductForm();
        }

        // Функция для редактирования товара
        function editProduct(id) {
            const product = products.find(p => p.id === id);
            
            if (product) {
                editMode = true;
                currentEditId = id;
                
                // Заполняем форму данными товара
                document.getElementById('edit-id').value = product.id;
                document.getElementById('product-category').value = product.category;
                document.getElementById('product-name').value = product.name;
                document.getElementById('product-price').value = product.price;
                document.getElementById('product-image').value = product.image;
                document.getElementById('product-images').value = product.images.join(', ');
                document.getElementById('product-video').value = product.video;
                document.getElementById('product-composition').value = product.composition;
                document.getElementById('product-size').value = product.size;
                document.getElementById('product-description').value = product.description;
                
                document.getElementById('form-title').textContent = 'Редактировать товар';
            }
        }

        // Функция для обновления товара
        function updateProduct(id, updatedProduct) {
            const index = products.findIndex(p => p.id === id);
            
            if (index !== -1) {
                products[index] = { ...updatedProduct, id };
                saveProducts();
                displayProductsByCategory();
                displayAdminProducts();
                resetProductForm();
            }
        }

        // Функция для удаления товара
        function deleteProduct(id) {
            if (confirm('Вы уверены, что хотите удалить этот товар?')) {
                products = products.filter(p => p.id !== id);
                saveProducts();
                displayProductsByCategory();
                displayAdminProducts();
            }
        }

        // Функция для сохранения товаров в localStorage
        function saveProducts() {
            localStorage.setItem('flowerShopProducts', JSON.stringify(products));
        }

        // Функция для сохранения настроек сайта
        function saveSiteSettings() {
            localStorage.setItem('flowerShopSettings', JSON.stringify(siteSettings));
        }

        // Функция для сохранения списка URL для импорта
        function saveImportUrls() {
            localStorage.setItem('flowerShopImportUrls', JSON.stringify(importUrls));
        }

        // Функция для сброса формы товаров
        function resetProductForm() {
            productForm.reset();
            editMode = false;
            currentEditId = null;
            document.getElementById('edit-id').value = '';
            document.getElementById('form-title').textContent = 'Добавить новый товар';
        }

        // Обработчик отправки формы товаров
        productForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            const category = document.getElementById('product-category').value;
            const name = document.getElementById('product-name').value;
            const price = parseFloat(document.getElementById('product-price').value);
            const image = document.getElementById('product-image').value;
            const images = document.getElementById('product-images').value.split(',').map(url => url.trim()).filter(url => url);
            const video = document.getElementById('product-video').value;
            const composition = document.getElementById('product-composition').value;
            const size = document.getElementById('product-size').value;
            const description = document.getElementById('product-description').value;
            
            // Если дополнительные изображения не указаны, используем основное
            if (images.length === 0) {
                images.push(image);
            }
            
            const product = {
                category,
                name,
                price,
                image,
                images,
                video,
                composition,
                size,
                description
            };
            
            if (editMode) {
                updateProduct(currentEditId, product);
            } else {
                addProduct(product);
            }
        });

        // Обработчик отправки формы дизайна
        designForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            siteSettings.siteLogo = document.getElementById('site-logo-input').value;
            siteSettings.heroTitle = document.getElementById('hero-title-input').value;
            siteSettings.heroSubtitle = document.getElementById('hero-subtitle-input').value;
            siteSettings.heroImage = document.getElementById('hero-image-input').value;
            siteSettings.aboutTitle = document.getElementById('about-title-input').value;
            siteSettings.aboutText = document.getElementById('about-text-input').value;
            siteSettings.aboutImage = document.getElementById('about-image-input').value;
            siteSettings.productsTitle = document.getElementById('products-title-input').value;
            
            saveSiteSettings();
            applySiteSettings();
            
            alert('Настройки дизайна сохранены!');
        });

        // Обработчик отправки формы контактов
        contactsForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            siteSettings.footerPhone = `Телефон: ${document.getElementById('footer-phone-input').value}`;
            siteSettings.footerAddress = `Адрес: ${document.getElementById('footer-address-input').value}`;
            siteSettings.footerEmail = `Email: ${document.getElementById('footer-email-input').value}`;
            siteSettings.footerHoursWeekdays = `Пн-Пт: ${document.getElementById('footer-hours-weekdays-input').value}`;
            siteSettings.footerHoursWeekend = `Сб-Вс: ${document.getElementById('footer-hours-weekend-input').value}`;
            siteSettings.footerInstagram = `Instagram: ${document.getElementById('footer-instagram-input').value}`;
            siteSettings.footerVk = `VK: ${document.getElementById('footer-vk-input').value}`;
            
            saveSiteSettings();
            applySiteSettings();
            
            alert('Контактная информация сохранены!');
        });

        // Обработчик отправки формы Telegram
        telegramForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            siteSettings.telegramBotToken = document.getElementById('telegram-bot-token').value;
            siteSettings.telegramChatId = document.getElementById('telegram-chat-id').value;
            
            saveSiteSettings();
            applySiteSettings();
            
            alert('Настройки Telegram сохранены!');
        });

        // Обработчик отправки заказа
        submitOrderBtn.addEventListener('click', () => {
            const customerName = document.getElementById('customer-name').value;
            const customerPhone = document.getElementById('customer-phone').value;
            const customerAddress = document.getElementById('customer-address').value;
            const deliveryDate = document.getElementById('delivery-date').value;
            const deliveryTime = document.getElementById('delivery-time').value;
            const orderComment = document.getElementById('order-comment').value;
            
            if (!customerName || !customerPhone) {
                alert('Пожалуйста, заполните обязательные поля: имя и телефон');
                return;
            }
            
            const orderData = {
                productName: currentOrderProduct.name,
                productPrice: currentOrderProduct.price,
                customerName,
                customerPhone,
                customerAddress,
                deliveryDate,
                deliveryTime,
                orderComment
            };
            
            // Отправляем заказ в Telegram
            const success = sendOrderToTelegram(orderData);
            
            if (success) {
                // Показываем сообщение об успехе
                orderForm.style.display = 'none';
                orderSuccess.style.display = 'block';
                
                // Очищаем форму
                document.getElementById('customer-name').value = '';
                document.getElementById('customer-phone').value = '';
                document.getElementById('customer-address').value = '';
                document.getElementById('delivery-date').value = '';
                document.getElementById('delivery-time').value = '';
                document.getElementById('order-comment').value = '';
            }
        });

        // Обработчики для импорта
        addUrlBtn.addEventListener('click', addImportUrl);
        clearUrlsBtn.addEventListener('click', clearImportUrls);
        importProductsBtn.addEventListener('click', importProducts);

        // Обработчик для парсинга Flowwow
        parseFlowwowBtn.addEventListener('click', () => {
            const url = flowwowUrlInput.value.trim();
            
            if (!url) {
                alert('Введите ссылку на товар в Flowwow');
                return;
            }
            
            if (!url.includes('flowwow.com')) {
                alert('Это не ссылка на Flowwow. Пожалуйста, введите корректную ссылку.');
                return;
            }
            
            parseFlowwowData(url);
        });

        // Обработчики событий для модальных окон
        adminBtn.addEventListener('click', () => {
            adminModal.style.display = 'block';
            displayAdminProducts();
            displayImportUrls();
        });

        closeBtn.addEventListener('click', () => {
            adminModal.style.display = 'none';
            resetProductForm();
        });

        closeOrderBtn.addEventListener('click', () => {
            orderModal.style.display = 'none';
        });

        closeDetailBtn.addEventListener('click', () => {
            productDetailModal.style.display = 'none';
        });

        cancelProductBtn.addEventListener('click', () => {
            resetProductForm();
        });

        cancelOrderBtn.addEventListener('click', () => {
            orderModal.style.display = 'none';
        });

        // Закрытие модальных окон при клике вне их
        window.addEventListener('click', (e) => {
            if (e.target === adminModal) {
                adminModal.style.display = 'none';
                resetProductForm();
            }
            if (e.target === orderModal) {
                orderModal.style.display = 'none';
            }
            if (e.target === productDetailModal) {
                productDetailModal.style.display = 'none';
            }
        });

        // Переключение вкладок администратора
        adminTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const tabId = tab.getAttribute('data-tab');
                
                // Убираем активный класс у всех вкладок и контента
                adminTabs.forEach(t => t.classList.remove('active'));
                adminTabContents.forEach(c => c.classList.remove('active'));
                
                // Добавляем активный класс текущей вкладке и контенту
                tab.classList.add('active');
                document.getElementById(`${tabId}-tab`).classList.add('active');
            });
        });

        // Переключение категорий товаров
        categoryTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const category = tab.getAttribute('data-category');
                switchCategory(category);
            });
        });

        // Плавная прокрутка для якорных ссылок
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                
                const targetId = this.getAttribute('href');
                if (targetId === '#') return;
                
                const targetElement = document.querySelector(targetId);
                if (targetElement) {
                    window.scrollTo({
                        top: targetElement.offsetTop - 80,
                        behavior: 'smooth'
                    });
                }
            });
        });

        // Инициализация при загрузке страницы
        document.addEventListener('DOMContentLoaded', () => {
            // Устанавливаем минимальную дату как сегодня
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('delivery-date').min = today;
            
            displayProductsByCategory();
            applySiteSettings();
            displayImportUrls();
            
            // Устанавливаем ссылку на Telegram
            telegramLink.href = 'https://t.me/' + (siteSettings.telegramChatId ? siteSettings.telegramChatId : '');
        });
    </script>
</body>
</html>

